<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nase Shopping Shop</title>
  <link rel="stylesheet" href="../Css/Mall.css" />

</head>
<body>
    
    <header>
    <nav>
      <a href="./Mall.html">Home</a>
      <a href="#">Shop</a>
      
    </nav>
  </header>
  
    <h1>My Mini Shop</h1>

    <!-- Products -->
     <div class="container">
        <div class="product-grid">
    <div class="product" data-price="700">
        <img src="../Assest/Laptop.jpeg">
      <h2>Laptop</h2>
      <p>$.700</p>
      <div class="controls">
         <button class="buy">Buy</button>
        <button class="minus">-</button>
        <span class="quantity">0</span>
        <button class="plus">+</button>
        <button class="delete">Delete</button>
      </div>
    </div>

    <div class="product" data-price="100">
        <img src="../Assest/Phone.jpeg">
      <h2>SmartWatch</h2>
      <p>$100.00</p>
      <div class="controls">
         <button class="buy">Buy</button>
        <button class="minus">-</button>
        <span class="quantity">0</span>
        <button class="plus">+</button>
        <button class="delete">Delete</button>
         </div>
    </div>

        <div class="product" data-price="20">
        <img src="../Assest/Headphone.jpeg">
      <h2>HeadPhone</h2>
      <p>$20.00</p>
      <div class="controls">
         <button class="buy">Buy</button>
        <button class="minus">-</button>
        <span class="quantity">0</span>
        <button class="plus">+</button>
        <button class="delete">Delete</button>
         </div>
    </div>


      <div class="product" data-price="400">
        <img src="../Assest/Phone.jpeg">
      <h2>Phone</h2>
      <p>$400.00</p>
      <div class="controls">
         <button class="buy">Buy</button>
        <button class="minus">-</button>
        <span class="quantity">0</span>
        <button class="plus">+</button>
        <button class="delete">Delete</button>
      </div>
      </div>
    </div>
     </div>
     </div>
    </div>

    <!-- Summary -->
    <div class="summary">
      <p>Total Items: <span id="total-items">0</span></p>
      <h2>Total Price: $<span id="total-price">0.00</span></h2>
      <button id="checkout">Checkout</button>
    </div>
  </div>
<br> <br>
   <footer>
    <p>&copy; 2025 Nase MiniShop. All rights reserved.</p>
    <p>Shop confidently with us today!</p>
  </footer>

  <script >
    
    const productElements = document.querySelectorAll('.product');

// Load saved cart from localStorage
function loadCartFromStorage() {
  const storedCart = JSON.parse(localStorage.getItem('cart')) || {};

  productElements.forEach(product => {
    const name = product.querySelector('h2').textContent;
    const quantityEl = product.querySelector('.quantity');
    quantityEl.textContent = storedCart[name] || 0;
  });
}

// Save current cart to localStorage
function saveCartToStorage() {
  const cart = {};

  productElements.forEach(product => {
    const name = product.querySelector('h2').textContent;
    const quantity = parseInt(product.querySelector('.quantity').textContent);
    if (quantity > 0) {
      cart[name] = quantity;
    }
  });

  localStorage.setItem('cart', JSON.stringify(cart));
}

productElements.forEach(product => {
  const quantityEl = product.querySelector('.quantity');
  const plusBtn = product.querySelector('.plus');
  const minusBtn = product.querySelector('.minus');
  const deleteBtn = product.querySelector('.delete');
  const buyBtn = product.querySelector('.buy'); // NEW
  const name = product.querySelector('h2').textContent;

  plusBtn.addEventListener('click', () => {
    let quantity = parseInt(quantityEl.textContent);
    quantity++;
    quantityEl.textContent = quantity;
    updateCartSummary();
  });

  minusBtn.addEventListener('click', () => {
    let quantity = parseInt(quantityEl.textContent);
    if (quantity > 0) {
      quantity--;
      quantityEl.textContent = quantity;
      updateCartSummary();
    }
  });

  deleteBtn.addEventListener('click', () => {
    quantityEl.textContent = '0';
    updateCartSummary();
  });

  // ✅ BUY BUTTON HANDLER
  buyBtn.addEventListener('click', () => {
    let quantity = parseInt(quantityEl.textContent);
    quantity++;
    quantityEl.textContent = quantity;
    updateCartSummary();
  });
});

// Update total items and price
function updateCartSummary() {
  let totalItems = 0;
  let totalPrice = 0;

  productElements.forEach(product => {
    const price = parseFloat(product.dataset.price);
    const quantity = parseInt(product.querySelector('.quantity').textContent);
    totalItems += quantity;
    totalPrice += price * quantity;
  });

  document.getElementById('total-items').textContent = totalItems;
  document.getElementById('total-price').textContent = totalPrice.toFixed(2);
  saveCartToStorage();
}

// Add event listeners for product controls
productElements.forEach(product => {
  const quantityEl = product.querySelector('.quantity');
  const plusBtn = product.querySelector('.plus');
  const minusBtn = product.querySelector('.minus');
  const deleteBtn = product.querySelector('.delete');
  const name = product.querySelector('h2').textContent;

  plusBtn.addEventListener('click', () => {
    let quantity = parseInt(quantityEl.textContent);
    quantity++;
    quantityEl.textContent = quantity;
    updateCartSummary();
  });

  minusBtn.addEventListener('click', () => {
    let quantity = parseInt(quantityEl.textContent);
    if (quantity > 0) {
      quantity--;
      quantityEl.textContent = quantity;
      updateCartSummary();
    }
  });

  deleteBtn.addEventListener('click', () => {
    quantityEl.textContent = '0';
    updateCartSummary();
  });
});

// Checkout button
document.getElementById('checkout').addEventListener('click', () => {
  const totalItems = parseInt(document.getElementById('total-items').textContent);

  if (totalItems === 0) {
    alert("Your cart is empty!");
  } else {
    alert("✅ Successful purchase!");
    
    // Clear cart
    productElements.forEach(product => {
      product.querySelector('.quantity').textContent = '0';
    });

    localStorage.removeItem('cart');
    updateCartSummary();
  }
});

// On page load
loadCartFromStorage();
updateCartSummary();



  </script>
</body>
</html>
